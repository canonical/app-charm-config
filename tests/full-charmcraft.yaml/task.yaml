summary: Test Go Structs with charmcraft.yaml without extra information

environment:
    APP_BASE_URL: http://go-app.example.com
    APP_PORT: 9000
    APP_METRICS_PORT: 9001
    APP_METRICS_PATH: /metrics
    APP_SECRET_KEY: onerandomkey
    HTTP_PROXY: http://proxy.example.com:3128
    # No HTTPS_PROXY
    NO_PROXY: 127.0.0.1,localhost,::1
    # User defined configs
    APP_USER_CONFIG_STRING: newstring
    APP_USER_CONFIG_INT: 2
    APP_USER_CONFIG_INT_NO_DEFAULT: 3
    APP_USER_CONFIG_BOOLEAN: true
    APP_USER_CONFIG_FLOAT: 1.5
    # Databases
    APP_POSTGRESQL_DB_CONNECT_STRING: "postgresql://test-username:test-password@test-postgresql:5432/test-database?connect_timeout=10"
    APP_POSTGRESQL_DB_FRAGMENT: ""
    APP_POSTGRESQL_DB_HOSTNAME: "test-postgresql"
    APP_POSTGRESQL_DB_NAME: "test-database"
    APP_POSTGRESQL_DB_NETLOC: "test-username:test-password@test-postgresql:5432"
    APP_POSTGRESQL_DB_PARAMS: ""
    APP_POSTGRESQL_DB_PASSWORD: "test-password"
    APP_POSTGRESQL_DB_PATH: "/test-database"
    APP_POSTGRESQL_DB_PORT: "5432"
    APP_POSTGRESQL_DB_QUERY: "connect_timeout=10"
    APP_POSTGRESQL_DB_SCHEME: "postgresql"
    APP_POSTGRESQL_DB_USERNAME: "test-username"
    APP_REDIS_DB_CONNECT_STRING: "http://redisuri"
    APP_REDIS_DB_FRAGMENT: ""
    APP_REDIS_DB_HOSTNAME: "redisuri"
    APP_REDIS_DB_NETLOC: "redisuri"
    APP_REDIS_DB_PARAMS: ""
    APP_REDIS_DB_PATH: ""
    APP_REDIS_DB_QUERY: ""
    APP_REDIS_DB_SCHEME: "http"
    # APP_MYSQL_CONNECT_STRING is optional, can have no env variables
    # APP_MONGODB_DB_CONNECT_STRING is optional, can have no env variables
    # Databases
    APP_S3_ACCESS_KEY: "access_key"
    APP_S3_SECRET_KEY: "secret_key"
    APP_S3_API_VERSION: "s3v4"
    APP_S3_BUCKET: "bucket"
    APP_S3_ENDPOINT: "https://s3.example.com"
    APP_S3_PATH: "/path/subpath/"
    APP_S3_REGION: "region"
    APP_S3_STORAGE_CLASS: "GLACIER"
    # APP_S3_ATTRIBUTES: json.dumps(attributes)
    # APP_S3_TLS_CA_CHAIN: json.dumps(ca_chain)
    APP_SAML_ENTITY_ID: "https://login.staging.ubuntu.com"
    APP_SAML_METADATA_URL: "https://login.staging.ubuntu.com/saml/metadata"
    APP_SAML_SINGLE_SIGN_ON_REDIRECT_URL: "https://login.staging.ubuntu.com/saml/"
    APP_SAML_SIGNING_CERTIFICATE: MIIFOjCCAyKgAwIBAgIUCWcJxrX+RK7+1rxXeiOk2Pef3NMwDQYJKoZIhvcNAQELBQAwHjEcMBoGA1UEAwwTc2FtbC5jYW5vbmljYWwudGVzdDAeFw0yMzA4MjYxNDQ5NDZaFw0zMzA4MjMxNDQ5NDZaMB4xHDAaBgNVBAMME3NhbWwuY2Fub25pY2FsLnRlc3QwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCvRliUlWDkDSCrRz/H5oTpRfIhMKJ/EwE6aWVue+GxdXivXRSBQFnPquE2XDcPPwEqsmjJ58pZ1D3hhPHQtyY9lhTcBP7TbRo2lx4aT0smCUellwpw4AqqARcPQvBPJ5s+sz4mRk7t8zV0eKjLTvvq8/qWKi1hHW9wJb9hD8Ie3Y3BbI5cc3+K9Nhqq2qNg7Pkmo7dvCDP3F8v+0gDRM6XuNhVq97EdjzUcXbHjj+CbjCeQKxBnhgfdHZEwbvqRv8YuWvJ2PmNUqFgjQRi2x0kXJyJW1OPaW83DiSvkqOaFb1rSt8/tK3ZdQ9YcoXf8bdJyRgrfS6YIJf+1o+ckty7rUEk+LhXH2OGg0rA6MIbTiFrMw4PVTRHJac0q8w4puQzTTKcCTBkj7Wi2sEKcOeauDYueLwGOF7pY4NL1em7xz7zYTsFYcDG5qnjdQAJOLCEJRKWoQezaLW4RTTbCJ0sa7U/lNtym45qwhkM5zR4kyLHV0U0XKTRrD94HslVLPZrxX9MXEos+ys6wWcxovPf5IMg4e3iMqxuwJmIOEMXTM/0GNjlNeovvUvbKz+nA1lIYOnf8BmnNoBUvJoIe02igU7+NBRvlqByYByJBz90JXa0Knh1kK+xCjo4deRtbe1JzWEEJZ+fB58SEn2C/ulJbngnb+uh4x1UgvbkWHH9wQIDAQABo3AwbjAdBgNVHQ4EFgQUVMab5jNo59oiOT2G91sxDCiZPuIwHwYDVR0jBBgwFoAUVMab5jNo59oiOT2G91sxDCiZPuIwDAYDVR0TAQH/BAIwADAeBgNVHREEFzAVghNzYW1sLmNhbm9uaWNhbC50ZXN0MA0GCSqGSIb3DQEBCwUAA4ICAQB5tLn9y3E/MciDkFSh1/PYAyNjs+zGxpm/KH95pKyVWeqFSt09+FnOVI/RUVsx7+FV3++gKfR5flsDbWhmtNAWvujyls7DFuWpf0pDfkrzaul3K1Fu2wF+xVklB+YYVDlP2LYrAdONiVq0Dd5a69tniwTDLjaKhhNJqOTrg/OywmDBa/Ym7kyih5oWP7fdoK9MBeFRrCJsD/831ax+LtNMhp+wgM7cmKJOLqNBbqRDhyPEk9XSK5gJdP1ty/2IEfktsGiPrjR6Wl2WvUj6BlCBFHh7aM4IYjuRo/XU+3yyEb2hvlEYT3rDaNa4ZBtGub6K9/M78CBPULaKlGWAVmdtXH8+04YRxWpyfP0XPPUzkzqAvLs6WEBeD1zEN/+1AtyGEAc0/e7LKwblOSXQC/lkjhiwpIF1UV24wHHDsOoMMvcAF+pJLZkPDKqYAktohhQjtUOOyQ1QxodY6F6ENfimlS0cDP7ngmEswe50VJ52otZvmq1n5aiyeF1hCcIQ8IqeLVrpIMcEA5GTMZgrbnUsjePNoD6kNuXzYrs4+/UIQfl8R51cuONh5jvLVT8SUR/6AYyVeUsK2VjwHFhIR5BRPTGxPsURbOWsjbzsVKFEiCfiG2ciUaexjZClXhRR0wpLqHu5luiR6FMXfE7BrjeJ/VTU37n9580tzlVKk1AA3Q==

execute: |
  mkdir -p ./config
  app-charm-config -c ./charm/charmcraft.yaml -o ./config/config.go -p config
  cat ./config/config.go
  go run .

