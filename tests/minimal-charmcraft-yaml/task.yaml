summary: Test Go Structs with charmcraft.yaml generated with the charmcraft go-framework

environment:
    APP_BASE_URL: http://go-app.example.com
    APP_PORT: 9000
    APP_METRICS_PORT: 9001
    APP_METRICS_PATH: /metrics
    APP_SECRET_KEY: onerandomkey
    HTTP_PROXY: http://proxy.example.com:3128
    # No HTTPS_PROXY
    NO_PROXY: 127.0.0.1,localhost,::1

execute: |
  mkdir charm
  (cd charm && charmcraft init --profile go-framework)
  app-charm-config gen -c ./charm/charmcraft.yaml -o ./config/config.go -p config
  cat ./config/config.go
  go run .

